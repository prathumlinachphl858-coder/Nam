-- ================= LOAD RAYFIELD =================
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "NamX Control Hub",
    LoadingTitle = "NamX Control Hub",
    LoadingSubtitle = "by Nam",
    ConfigurationSaving = { Enabled = false },
    KeySystem = false
})

local ESPTab   = Window:CreateTab("ESP", 4483362458)
local PerfTab  = Window:CreateTab("Performance", 4483362458)
local AimTab   = Window:CreateTab("Aimbot", 4483362458)
local MiscTab  = Window:CreateTab("Misc", 4483362458)
local BuildTab = Window:CreateTab("Build", 4483362458)

-- ================= SERVICES ======================
local Players     = game:GetService("Players")
local RunService  = game:GetService("RunService")
local Lighting    = game:GetService("Lighting")
local Camera      = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- =================== AIMBOT ======================
local aimPartName = "Head"
local FieldOfView = 100
local TeamCheck = true
local autoLockEnabled = false

-- ðŸ”¥ Strong Aim
local strongAimEnabled = false
local aimStrength = 8
local lockedTarget = nil

local circle = Drawing.new("Circle")
circle.Visible = false
circle.Radius = FieldOfView
circle.Color = Color3.fromRGB(0,255,0)
circle.Thickness = 1
circle.Filled = false

RunService.RenderStepped:Connect(function()
    circle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
end)

local function IsVisible(part)
    local params = RaycastParams.new()
    params.FilterDescendantsInstances = {LocalPlayer.Character, Camera}
    params.FilterType = Enum.RaycastFilterType.Blacklist
    local result = workspace:Raycast(
        Camera.CFrame.Position,
        (part.Position - Camera.CFrame.Position).Unit * 500,
        params
    )
    return result and result.Instance:IsDescendantOf(part.Parent)
end

local function GetClosestEnemy()
    local closest, shortest = nil, FieldOfView
    for _,plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild(aimPartName) then
            if not TeamCheck or plr.Team ~= LocalPlayer.Team then
                local hum = plr.Character:FindFirstChild("Humanoid")
                if hum and hum.Health > 0 then
                    local part = plr.Character[aimPartName]
                    local pos, onScreen = Camera:WorldToViewportPoint(part.Position)
                    local dist = (Vector2.new(pos.X,pos.Y) - circle.Position).Magnitude
                    if onScreen and dist < shortest and IsVisible(part) then
                        shortest = dist
                        closest = part
                    end
                end
            end
        end
    end
    return closest
end

RunService.RenderStepped:Connect(function()
    if not autoLockEnabled then
        lockedTarget = nil
        return
    end

    if strongAimEnabled then
        if not lockedTarget or not lockedTarget.Parent then
            lockedTarget = GetClosestEnemy()
        end

        if lockedTarget then
            local camPos = Camera.CFrame.Position
            local targetCF = CFrame.new(camPos, lockedTarget.Position)
            Camera.CFrame = Camera.CFrame:Lerp(targetCF, aimStrength / 10)
        end
    else
        local target = GetClosestEnemy()
        if target then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Position)
        end
    end
end)

-- ================= AIMBOT UI =================
AimTab:CreateToggle({
    Name = "Enable Aimbot",
    CurrentValue = false,
    Callback = function(v)
        autoLockEnabled = v
        lockedTarget = nil
    end
})

AimTab:CreateToggle({
    Name = "Strong Aim (à¹à¸£à¸‡)",
    CurrentValue = false,
    Callback = function(v)
        strongAimEnabled = v
        lockedTarget = nil
    end
})

AimTab:CreateSlider({
    Name = "Aim Strength",
    Range = {1,10},
    Increment = 1,
    CurrentValue = aimStrength,
    Callback = function(v)
        aimStrength = v
    end
})

AimTab:CreateToggle({
    Name = "Show FOV Circle",
    CurrentValue = false,
    Callback = function(v)
        circle.Visible = v
    end
})

AimTab:CreateSlider({
    Name = "FOV Radius",
    Range = {30,300},
    Increment = 5,
    CurrentValue = FieldOfView,
    Callback = function(v)
        FieldOfView = v
        circle.Radius = v
    end
})

AimTab:CreateToggle({
    Name = "Team Check",
    CurrentValue = true,
    Callback = function(v)
        TeamCheck = v
    end
})

AimTab:CreateButton({
    Name = "Aim Head Only",
    Callback = function()
        aimPartName = "Head"
        Rayfield:Notify({
            Title = "Aimbot",
            Content = "Aim Part: Head",
            Duration = 2
        })
    end
})
